FROM mcr.microsoft.com/devcontainers/base:ubuntu

# Prevent interactive prompts (for tzdata, et  c.)
RUN echo \
	'debconf debconf/frontend select Noninteractive' | debconf-set-selections

# general stuff
RUN apt-get update && apt-get install -y python3 python3-pip python3-venv python-is-python3

# pytorch
RUN pip3 install --pre torch --index-url https://download.pytorch.org/whl/nightly/cu128


# sumo deps
RUN apt-get update && apt-get install -y libx11-6 libxrender1 libxtst6 libxi6 ffmpeg libsm6 libxext6
RUN apt-get update && apt-get install -y software-properties-common

# sumo
RUN add-apt-repository ppa:sumo/stable && apt update && apt install -y sumo sumo-tools sumo-doc
RUN pip3 install eclipse-sumo traci==1.24.0

# other stuff needed for run
RUN pip3 install numpy pandas matplotlib

#RUN apt-get clean && rm -rf /var/lib/apt/lists/*